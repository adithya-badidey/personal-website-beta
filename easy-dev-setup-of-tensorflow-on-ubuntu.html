
<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

  <meta name="generator" content="TiddlyWiki" />
  <meta name="tiddlywiki-version" content="5.1.23" />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="format-detection" content="telephone=no">
	<script></script>
  <link id="faviconLink" rel="shortcut icon" href="/favicon.ico">

<title>Easy dev setup of TensorFlow on Ubuntu ~ Adithya's Lair</title>
<meta name="description" content="I got a new laptop with a GPU and decided to re-start my deep learning development learning path with tensorflow (tf) from scratch. To install it and get it running well was a more involved process than I thought.">

<meta property="og:type" content="article" />
<meta property="og:url" content="https://adithyab.in/easy-dev-setup-of-tensorflow-on-ubuntu" />
<meta property="og:title" content="Easy dev setup of TensorFlow on Ubuntu ~ Adithya's Lair" />
<meta property="og:image" content="" />
<meta property="og:description" content="I got a new laptop with a GPU and decided to re-start my deep learning development learning path with tensorflow (tf) from scratch. To install it and get it running well was a more involved process than I thought." />

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@adithya_badidey">
<meta name="twitter:creator" content="@adithya_badidey">
<meta name="twitter:title" content="Easy dev setup of TensorFlow on Ubuntu ~ Adithya's Lair" />
<meta name="twitter:description" content="I got a new laptop with a GPU and decided to re-start my deep learning development learning path with tensorflow (tf) from scratch. To install it and get it running well was a more involved process than I thought." />
<meta name="twitter:image" content="" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171642977-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-171642977-1');

  document.addEventListener("DOMContentLoaded", () => {
    const e = Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"), 0);
    e.length > 0 && e.forEach(e => {
      e.addEventListener("click", () => {
        const t = e.dataset.target,
          a = document.getElementById(t);
        e.classList.toggle("is-active"), a.classList.toggle("is-active")
      })
    })
  });
</script>

<link rel="stylesheet" href="css/style.css" />
</head>

<body class="tc-body">
  
<nav aria-label="main navigation" class="navbar" role="navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        Adithya's Lair
      </a>

      <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navbarTW" role="button">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navbarTW">
      <div class="navbar-end">
<a class="navbar-item" href="/">Home</a>
<a class="navbar-item" href="/blog">Blog</a>
<a class="navbar-item" href="/portfolio">Portfolio</a>
     </div>
    </div>
  </nav>


<section class="section">
    <div class="columns mt-6">
        <div class="column is-5-fullhd is-6-desktop is-8-tablet is-offset-2">
            <div class="content tc-blog">
                
                <span class="has-text-grey-light is-small tc-subtitle tc-created">
                    29th December, 2021
                </span>
                <h1 class="tc-title mt-1">
                    Easy dev setup of TensorFlow on Ubuntu
                </h1>
                <p>I got a new laptop with a GPU and decided to re-start my deep learning development learning path with tensorflow (tf) from scratch. To install it and get it running well was a more involved process than I thought.</p><p>To begin with, confirm that your system has a GPU which is supported. There is a list at <a class="tc-tiddlylink-external" href="https://developer.nvidia.com/cuda-gpus" rel="noopener noreferrer" target="_blank">https://developer.nvidia.com/cuda-gpus</a> (most consumer GPUs will be under <em>CUDA-Enabled GeForce and TITAN Products</em>) but it's  not comprehensive (I have a 1660 GTX which is not in the list). As long as you have something in the same range as the GPUs mentioned in the link, you should be good.</p><p>Also, install the latest LTS version of ubuntu. I initially installed Ubuntu 20.10 (which is the latest version as of this note) and had to wipe it and install 20.04 LTS to get all the components working.</p><p>The <a class="tc-tiddlylink-external" href="https://www.tensorflow.org/install" rel="noopener noreferrer" target="_blank">official page</a> suggests two options <code>docker</code> and <code>pip</code>. Additionally, there are installation options using <code>conda</code>:</p><h2 class="">Using <code>docker</code></h2><p>For me, this did not work out of the box and it was too much to figure out what was going wrong on two fronts - the tensorflow and docker container. </p><p>This option might work for you if are already adept at using docker. I would avoid otherwise. Its definitely not <em>'the easiest way to set up GPU support'</em> as the website says.</p><h2 class="">Using <code>conda</code></h2><p>Next, I tried installing using <code>conda</code> because thats what I use in most of my development work.</p><p>The official anaconda installation at <a class="tc-tiddlylink-external" href="https://anaconda.org/anaconda/tensorflow-gpu" rel="noopener noreferrer" target="_blank">https://anaconda.org/anaconda/tensorflow-gpu</a> is seamless in installing all the required components but its also very old (v2.4.2 for linux). I installed this initially and found a lot of tutorials at the tensorflow website were breaking. This might be a good option for windows users though.</p><p>The other installation from conda-forge <a class="tc-tiddlylink-external" href="https://anaconda.org/conda-forge/tensorflow/badges" rel="noopener noreferrer" target="_blank">https://anaconda.org/conda-forge/tensorflow/badges</a> might be better (v2.6.2) but still not at the latest version (v2.7.0). </p><h2 class="">Using <code>pip</code></h2><p>This is the easiest and best option currently IMO. The directions at <a class="tc-tiddlylink-external" href="https://www.tensorflow.org/install/pip" rel="noopener noreferrer" target="_blank">https://www.tensorflow.org/install/pip</a> are pretty good.</p><ul><li>CUDA Setup<ul><li>Install gcc using <code>sudo apt install gcc</code></li><li>To start with, install proprietary nvidia drivers in Ubuntu by navigating to <em>Software &amp; Updates</em> &gt; <em>Additional Drivers</em> &gt; <em>Using Nvidia driver</em>. Choose the latest one.</li><li>Install the CUDA Drivers from <a class="tc-tiddlylink-external" href="https://developer.nvidia.com/cuda-downloads" rel="noopener noreferrer" target="_blank">https://developer.nvidia.com/cuda-downloads</a></li><li>Install libcudnn8 from <a class="tc-tiddlylink-external" href="https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/" rel="noopener noreferrer" target="_blank">https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/</a> (thanks to <a class="tc-tiddlylink-external" href="https://github.com/tensorflow/tensorflow/issues/45200" rel="noopener noreferrer" target="_blank">this</a> github thread for pointing me here)</li><li>Follow post-installation steps at <a class="tc-tiddlylink-external" href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions" rel="noopener noreferrer" target="_blank">https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions</a>. For my system (Ubuntu 20.04, 64-bit) they were:<ul><li><code>&gt; export PATH=/usr/local/cuda-11.5/bin${PATH:+:${PATH}}</code></li><li><code>&gt; export LD_LIBRARY_PATH=/usr/local/cuda-11.5/lib64 ${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</code></li><li><code>&gt; sudo systemctl enable nvidia-persistenced</code></li><li><code>&gt; sudo cp /lib/udev/rules.d/40-vm-hotadd.rules /etc/udev/rules.d</code></li><li><code>&gt; sudo sed -i '/SUBSYSTEM==&quot;memory&quot;, ACTION==&quot;add&quot;/d' /etc/udev/rules.d/40-vm-hotadd.rules</code></li></ul></li></ul></li><li>Pip / virtualenv<ul><li>Install pip3/virtualenv<ul><li><code>&gt; sudo apt update</code></li><li><code>&gt; sudo apt install python3-dev python3-pip python3-venv</code></li></ul></li><li>Create and activate your virtualenv<ul><li><code>&gt; python3 -m venv --system-site-packages ./venv </code></li><li><code>&gt; source ./venv/bin/activate  # sh, bash, or zsh</code></li></ul></li><li>Upgrade pip<ul><li><code>(venv) &gt; pip install --upgrade pip</code></li></ul></li><li>Insall Tensorflow<ul><li><code>(venv) &gt; pip install --upgrade tensorflow</code></li></ul></li><li>Done!</li></ul></li></ul>
            </div>
            <div class="tc-blog-footer">
                <hr class="mb-2">
                <nav class="tc-backlinks mb-4">
                    <h2 class="backlinks-header">
                        
                    </h2>
                    <div class="content">
                        <ul>
                            
                        </ul>
                    </div>
                </nav>
                <nav class="level is-mobile">
                    
                    <div class="level-left">
                        <p class="is-size-7 has-text-grey-light is-small tc-modified tc-subtitle">Last Updated:Â 
                            29th December, 2021
                        </p>
                    </div>
                    <div class="level-right">
                        <div class="tags">
                            
                                <span class="tag">
                                    AI
                                </span>
                            
                                <span class="tag">
                                    deep learning
                                </span>
                            
                                <span class="tag">
                                    tensorflow
                                </span>
                            
                        </div>
                    </div>
                </nav>
                <hr>
            </div>
            <div id="disqus_thread"></div>
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>
</section>

<footer class="footer">
  <div class="columns">
	  <div class="column is-6-desktop is-8-tablet is-offset-2"><p><p>
Built with <a class="tc-tiddlylink-external" href="https://tiddlyjam.com" rel="noopener noreferrer" target="_blank">TiddlyJam</a> and <a class="tc-tiddlylink-external" href="https://bulma.io/" rel="noopener noreferrer" target="_blank">Bulma</a>. Hosted on <a class="tc-tiddlylink-external" href="https://pages.github.com/" rel="noopener noreferrer" target="_blank">Github Pages</a>.
    </p>
		</p></div>
  </div>
	<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;600&amp;display=swap" rel="stylesheet">
</footer>

</body>
</html>
